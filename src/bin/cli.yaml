name: braid
version: "0.0.1"
author: "Baxter S. Eaves Jr"
about: "Expressive genetic analysis"
args:
    - verb:
        short: v
        long: verbose
        multiple: true
        help: "Display verbose output"
        global: true
subcommands:
    - geweke:
        about: "Runs the Geweke (joint distribution) test"
        args:
            - nrows:
                required: true
                takes_value: true
                help: "The number of rows in the synthetic table"
            - ncols:
                required: true
                takes_value: true
                help: "The number of columns in the synthetic table"
            - niter:
                required: true
                takes_value: true
                help: "The number of samples to collect"
            - output:
                long: output
                takes_value: true
                default_value: "geweke_out.json"
                help: "Path and name of output file (JSON)"
            - view-only:
                long: view-only
                help: "Run geweke on a view rather than a state"
            - coltypes:
                long: column-types
                takes_value: true
                multiple: true
                use_delimiter: true
                possible_values:
                    - c  # continuous
                    - t  # categorical
                help: "A comma-separated list of column types"
                long_help: >
                    A comma-separated list of columns type flags. 'c' denotes
                    a continuous column, and 't' denotes categorical.
    - run:
        about: "Create and run a new  or existing Engine"
        args:
            - nstates:
                required: true
                takes_value: true
                help: "Number of states"
            - niter:
                required: true
                takes_value: true
                help: "The number of samples to collect"
            - output:
                required: true
                takes_value: true
                help: "The path to the output file (MessagePack)"
            - engine_src:
                long: engine
                takes_value: true
                help: "Path to the engine source"
                conflicts_with: codebook
                conflicts_with: csv_src
                conflicts_with: sqlite_src
                long_help: >
                    The path to the serialized (MessagePack) Engine file. If
                    specified, the engine will be run for additional iterations
                    starting from its current state.
            - codebook:
                required: true
                takes_value: true
                help: "Path to codebook"
            - sqlite_src:
                long: sqlite
                takes_value: true
                help: "Path to sqlite3 source"
                conflicts_with: csv_src
            - csv_src:
                long: csv
                takes_value: true
                help: "Path to csv source"
    - load:
        about: "Create a server from an existing Engine-Oracle"
        args:
            - path:
                required: true
                takes_value: true
                help: "Path to the serialized data"
            - niter:
                required: true
                takes_value: true
                help: "The number of samples to collect"
            - output:
                required: true
                takes_value: true
                help: "The path to the output file (MessagePack)"
    - oracle:
        about: "Load an Oracle HTTP server"
        args:
            - path:
                required: true
                takes_value: true
                help: "Path to the serialized state data"
            - port:
                short: p
                takes_value: true
                default_value: "8882"
                help: "The TCP port on which to listen, 127.0.0.1:<port>"
    - codebook:
        about: "Generate a codebook from a csv file"
        args:
            - csv_src:
                required: true
                takes_value: true
                help: "Path to the csv"
            - output:
                required: true
                takes_value: true
                help: "Codebook destination path"
